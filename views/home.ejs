<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head')  %>
    <title>Blog Post</title>
</head>
<body>

    <%- include('./partials/nav')  %>
   
    <%- include('./createpost') %>


<div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-4 m-2">
    <% posts.forEach(post => { %>
        
    <div class="col">
        <a href="/post/<%= post._id %>" class="text-decoration-none text-dark">
           <div class="card" style="width: 340px; height: 300px;">
      <div style="width: 100%; height: 180px; overflow: hidden;">
        <img 
          src="<%= post.coverImage %>"
          class="card-img-top" 
          alt="..." 
          style="width: 100%; height: 100%; object-fit: cover;">
      </div>

      <div class="card-body d-flex pb-2">
        
        <div style="flex-shrink: 0; width: 60px;">
           <a href="#" title="Profile" onclick="event.stopPropagation()">
             <img src="<%= post.createdBy.profileUrl %>" 
                  alt="Profile" 
                  class="rounded-circle border border-2 border-primary me-2" 
                  style="width: 40px; height: 40px; object-fit: cover;"> 
            </a> 
        </div>

        <div style="flex-grow: 1; min-width: 0;">
          <h6 class="card-title mb-1" 
              style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; line-height: 1.3em; max-height: 2.6em;">
            <%= post.postTitle %>
          </h6>

          <p class="mb-1 text-muted small"><%= post.createdBy.fullName %></p>
          <div class="d-flex small text-muted gap-3">
            <span><%= post.visitors.length %></span>
            <span><%= post.createdAt.toDateString() %></span>
          </div>
        </div>
      </div>
    </div> 
  </a>
    
  </div>
    <% }); %>
</div>






    <%- include('./partials/scripts')  %>
</body>
</html>